import{r as f,u as F,a as c,x as O,J as D,w as G,K as M,L as S,M as E,l as H,O as C,Q as g,j as e,n as k,R as $,T as R,U as z,V as J,W as K}from"./index-b8ebd590.js";import{P as w}from"./pokeFront-5aba291b.js";import{N as h}from"./PokeDex-6b002be9.js";const L="_battle_1h103_1",Q="_chosenPokemons_1h103_7",V="_chosenPokemonsAI_1h103_10",W="_arena_1h103_13",Y="_list_1h103_28",q="_item_1h103_34",X="_itemAI_1h103_39",Z="_pokeFrontBox_1h103_46",ee="_name_1h103_49",se="_menu_1h103_58",te="_difficultyBox_1h103_65",ae="_difficultyText_1h103_68",ne="_btn_1h103_79",oe="_pokemonArenaUser_1h103_103",re="_pokemonArenaComputer_1h103_112",le="_pokeArenaImage_1h103_121",ce="_moveUpDown_1h103_1",ie="_healthBar_1h103_136",me="_health_1h103_136",he="_healthText_1h103_148",s={battle:L,chosenPokemons:Q,chosenPokemonsAI:V,arena:W,list:Y,item:q,itemAI:X,pokeFrontBox:Z,name:ee,menu:se,difficultyBox:te,difficultyText:ae,btn:ne,pokemonArenaUser:oe,pokemonArenaComputer:re,pokeArenaImage:le,moveUpDown:ce,healthBar:ie,health:me,healthText:he},_e=()=>{const[d,u]=f.useState(0),r=F(),p=c(O),_=p.cards,i=c(D),v=c(G),j=c(M),N=c(S),m=c(E);let n=p.pokemonOnArena,a=i.pokemonOnArena;const b=c(H),x=b.filter(t=>{const o=t.name;return _.some(l=>l.overview.name===o)}),P=b.filter(t=>{const o=t.name;return i.cards.some(l=>l.name===o)});f.useEffect(()=>{m===!1&&(a=null)},[m]);const A=t=>{r($(t))},B=t=>{const o=_.filter(l=>l.overview.name===t);r(R(o[0]))},I=(t,o)=>{if(j===!1)return h.Notify.failure("wait for youre turn User!");let l=a.stats[0].base_stat;l-=t,r(z({health:l,id:o}))},y=()=>{if(N===!1)return h.Notify.failure("wait for youre turn Computer!");const t=n.overview.id;let o=n.overview.stats[0].base_stat;o-=a.stats[1].base_stat/10,r(J({health:o,id:t}))},U=()=>{if((_.length<3||i.cards.length<3)&&h.Notify.warning("Pick difficulty level or add pokemons for battle"),n)r(K()),r(g(i.cards[d])),u(t=>t+=1);else{h.Notify.warning("U must pick pokemon to start");return}},T=()=>{r(C()),u(0)};return f.useEffect(()=>{if(m!==!1){if(console.log("wykonano damage na bocie"),a.stats[0].base_stat<=0&&d>2)return r(C()),h.Notify.success(`Congrats ${v.username}, You have won a battle!`);a.stats[0].base_stat<=0&&(r(g(i.cards[d])),u(t=>t+=1)),j===!1&&N===!0&&y()}}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.menu,children:[e.jsx("h3",{className:s.difficultyText,children:"Difficulty:"}),e.jsxs("div",{className:s.difficultyBox,children:[e.jsx("button",{className:s.btn,type:"button",onClick:()=>A("easy"),children:"Easy"}),e.jsx("button",{className:s.btn,type:"button",onClick:()=>A("medium"),children:"Medium"})]}),e.jsxs("p",{children:["Game started?: ",m===!0&&e.jsx("span",{children:"Game ON"})]})]}),e.jsxs("div",{className:s.battle,children:[e.jsxs("div",{className:s.chosenPokemons,children:[e.jsx("h2",{className:s.name,children:v.username}),p.cards.length<3?e.jsx("p",{children:"Add more cards to start battle"}):e.jsx("ul",{className:s.list,children:x==null?void 0:x.map(t=>e.jsx("li",{className:s.item,onClick:()=>B(t.name),children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(w,{pokemon:t})})},k()))})]}),e.jsxs("div",{className:s.arena,style:m?{backgroundImage:"url(https://i.redd.it/dnlz6c3xni951.jpg)"}:{},children:[e.jsx("button",{onClick:()=>y(),children:"Make damage for user"}),e.jsx("button",{onClick:()=>U(),children:"Start game"}),e.jsx("button",{onClick:()=>T(),children:"Stop Game"}),n===null?null:e.jsxs("div",{className:s.pokemonArenaUser,children:[e.jsx("img",{className:s.pokeArenaImage,alt:"picked Pokemon",src:n.overview.sprites.back_default}),e.jsx("h2",{children:n.overview.name}),e.jsx("div",{className:s.healthBar,style:{width:`${n.overview.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",n.overview.stats[0].base_stat]})})}),e.jsxs("button",{type:"button",onClick:()=>I(n.overview.stats[1].base_stat/10,a.id),children:["Hit ",n.overview.stats[1].base_stat]})]}),a===null&&m===!1?null:e.jsxs("div",{className:s.pokemonArenaComputer,children:[e.jsx("img",{className:s.pokeArenaImage,alt:"picked Pokemon",src:a.sprites.front_default}),e.jsx("h2",{children:a.name}),e.jsx("div",{className:s.healthBar,style:{width:`${a.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",a.stats[0].base_stat]})})})]})]}),e.jsxs("div",{className:s.chosenPokemonsAI,children:[e.jsx("h2",{className:s.name,children:"AI"}),i.cards.length<3?e.jsx("ul",{className:s.list,children:e.jsx("li",{className:s.item,children:e.jsx("div",{className:s.pokeFrontBox})},k())}):e.jsx("ul",{className:s.list,children:P.map(t=>e.jsx("li",{className:s.itemAI,children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(w,{pokemon:t})})},k()))})]})]})]})};export{_e as default};
