import{r as i,u as ge,a as x,l as ve,p as g,D as V,E as Z,j as e,n as d,R as je,e as ee,F as Ne,G as be,H as Be,I as Ce,J as Pe,K as Ae,L as Te,M as we,O as ye}from"./index-a432f0ec.js";import{b as Ie,P as se}from"./pokemonsSelectors-590581ac.js";import{s as De,a as Fe,b as Se,c as Ge,d as $e,e as Me}from"./PokeDex-a6fb3467.js";const Ue="_battle_1kxmp_1",Ee="_chosenPokemons_1kxmp_7",Oe="_chosenPokemonsAI_1kxmp_10",Re="_arena_1kxmp_13",Le="_errorMessage_1kxmp_27",Ye="_moveBox_1kxmp_37",He="_list_1kxmp_42",ze="_item_1kxmp_48",Je="_itemAI_1kxmp_53",Ke="_pokeFrontBox_1kxmp_60",We="_name_1kxmp_63",Xe="_menuGear_1kxmp_71",qe="_menu_1kxmp_71",Qe="_menuBackdrop_1kxmp_99",Ve="_menuTitle_1kxmp_108",Ze="_menuList_1kxmp_116",es="_menuItem_1kxmp_122",ss="_difficultyBox_1kxmp_125",ts="_menuText_1kxmp_129",as="_menuRulesBox_1kxmp_139",ns="_menuRulesBoxOpen_1kxmp_155",os="_rulesTitle_1kxmp_158",ls="_rulesText_1kxmp_167",is="_btn_1kxmp_178",ms="_menuCloseBtn_1kxmp_201",cs="_pokemonArenaUser_1kxmp_223",rs="_defeated_1kxmp_233",us="_pokemonArenaComputer_1kxmp_237",ds="_pokeArenaImage_1kxmp_246",hs="_moveUpDown_1kxmp_1",ps="_userAtacking_1kxmp_251",xs="_attackAI_1kxmp_1",ks="_computerAtacking_1kxmp_265",_s="_attackUser_1kxmp_1",fs="_healthBar_1kxmp_290",gs="_health_1kxmp_290",vs="_healthText_1kxmp_302",js="_userGui_1kxmp_312",Ns="_guiPokemonName_1kxmp_320",bs="_userBtn_1kxmp_328",Bs="_userGuiPokemonStats_1kxmp_352",Cs="_computerGui_1kxmp_359",Ps="_gameFinished_1kxmp_367",As="_gameFinishedModal_1kxmp_376",Ts="_gameFinishedTitle_1kxmp_394",ws="_gameFinishedText_1kxmp_403",ys="_disabledBtn_1kxmp_410",Is="_pokemonDefending_1kxmp_415",Ds="_pickedPokemonBar_1kxmp_420",Fs="_lostPokemon_1kxmp_438",Ss="_lostPokemonList_1kxmp_441",s={battle:Ue,chosenPokemons:Ee,chosenPokemonsAI:Oe,arena:Re,errorMessage:Le,moveBox:Ye,list:He,item:ze,itemAI:Je,pokeFrontBox:Ke,name:We,menuGear:Xe,menu:qe,menuBackdrop:Qe,menuTitle:Ve,menuList:Ze,menuItem:es,difficultyBox:ss,menuText:ts,menuRulesBox:as,menuRulesBoxOpen:ns,rulesTitle:os,rulesText:ls,btn:is,menuCloseBtn:ms,pokemonArenaUser:cs,defeated:rs,pokemonArenaComputer:us,pokeArenaImage:ds,moveUpDown:hs,userAtacking:ps,attackAI:xs,computerAtacking:ks,attackUser:_s,healthBar:fs,health:gs,healthText:vs,userGui:js,guiPokemonName:Ns,userBtn:bs,userGuiPokemonStats:Bs,computerGui:Cs,gameFinished:Ps,gameFinishedModal:As,gameFinishedTitle:Ts,gameFinishedText:ws,disabledBtn:ys,pokemonDefending:Is,pickedPokemonBar:Ds,lostPokemon:Fs,lostPokemonList:Ss},Us=()=>{const[te,M]=i.useState(0),[ae,U]=i.useState([""]),[v,A]=i.useState(!0),[E,T]=i.useState(!1),[h,B]=i.useState(!1),[ne,j]=i.useState(!1),[N,O]=i.useState(""),[oe,R]=i.useState(!1),[le,w]=i.useState(!1),[f,ie]=i.useState(),[p,C]=i.useState(0),[P,y]=i.useState(0),[me,ce]=i.useState(!1),[L,re]=i.useState([]),[ue,de]=i.useState([""]),[he,Y]=i.useState(!1),[pe,H]=i.useState(!1),r=ge(),I=x(De),k=I.cards,_=x(Fe),D=x(ve),F=x(Se),z=x(Ge),c=x($e),xe=x(Me);let n=I.pokemonOnArena,o=_.pokemonOnArena;const J=x(Ie),S=J.filter(t=>{const a=t.name;return k.some(l=>l.overview.name===a)}),G=J.filter(t=>{const a=t.name;return _.cards.some(l=>l.name===a)});i.useEffect(()=>{c===!1&&(o=null)},[c]);const K=t=>{r(Ne(t)),ie(t)},ke=t=>{const a=k.filter(l=>l.overview.name===t);r(Z(a[0]))},W=(t,a)=>{if(F===!1)return g.Notify.failure("wait for youre turn User!");console.log("user atakuje");let l=o.stats[0].base_stat;const u=o.stats[2].base_stat/10;if(console.log(h,"poza warunkiem"),h){console.log(h);let m=a-u;m<0&&(m=0),l-=m,B(!1),setTimeout(()=>{j(!1)},2e3)}else l-=a;const b=l.toFixed(2);r(be({healtForDispatch:b,id:t})),p!==3&&(C(m=>m+=1),console.log(p)),Y(!0),setTimeout(()=>{Y(!1)},1500)},X=t=>{if(z===!1)return g.Notify.failure("wait for youre turn Computer!");console.log(h,"poza warunkiem"),B(!1),j(!1);const a=n.overview.id,l=n.overview.stats[2].base_stat/10;let u=n.overview.stats[0].base_stat;if(E){let m=t-l;m<0&&(m=0),u-=m,setTimeout(()=>{T(!1)},2e3)}else u-=t;P!==3&&(y(m=>m+=1),console.log(p)),H(!0);const b=u.toFixed(2);r(Be({healtForDispatch:b,id:a})),setTimeout(()=>{H(!1)},1500)},_e=()=>{T(!0),p!==3&&C(t=>t+=1),r(Ce()),B(!1),setTimeout(()=>{j(!1)},2e3)},q=()=>{j(!0),B(!0),setTimeout(()=>{T(!1)},2e3),P!==3&&(y(t=>t+=1),console.log(p)),r(Pe()),setTimeout(()=>{j(!1)},2e3)},fe=()=>{if((k.length<3||_.cards.length<3)&&g.Notify.warning("Pick difficulty level or add pokemons for battle"),n)A(!1),r(Ae()),r(V(_.cards[te])),M(t=>t+=1);else{g.Notify.warning("U must pick pokemon to start");return}},$=()=>{r(Te()),M(0),U([""]),C(0)},Q=(t,a)=>{if(t==="won"){let l=0;a==="easy"&&(l=1e3),a==="medium"&&(l=1500),r(we(l))}if(t==="lost"){const l=k.map(m=>m.overview.id);let u=[];if(a==="easy"&&u.push(l[Math.floor(Math.random()*l.length)]),a==="medium")for(;u.length<2;){const m=Math.floor(Math.random()*l.length);u.includes(l[m])||u.push(l[m])}const b=k.filter(m=>u.includes(m.overview.id));re(b),r(ye(u))}};return i.useEffect(()=>{if(c!==!1){if(console.log("game logic"),o.stats[0].base_stat<=0){const t=_.cards.findIndex(a=>a.stats[0].base_stat>0);if(t<0)return O("won"),R(!0),w(!0),$(),Q("won",f),g.Notify.success(`Congrats ${D.username}, You have won a battle!`);o.stats[0].base_stat<=0&&(setTimeout(()=>{r(V(_.cards[t]))},1500),setTimeout(()=>{de(a=>[...a,o.name])},100))}if(F===!1&&z===!0){const t=o.stats[1].base_stat/10,a=o.stats[3].base_stat;console.log(P),P===3&&Math.random()>.1?(X(a),console.log("pc SUPERatakuje"),console.log(h),y(0)):Math.random()<.3||p===3&&Math.random()<.5?(q(),console.log("pc DEFENDUJE SIE"),console.log(h)):(X(t),console.log("pc ATAKUJE"),console.log(h))}if(n.overview.stats[0].base_stat<=0){const t=k.findIndex(a=>a.overview.stats[0].base_stat>0);if(t<0)return O("lost"),R(!0),w(!0),$(),Q("lost",f),g.Notify.success(`You lost! Dont worry ${D.username}, You can try again!`);t>=0&&(r(Z(k[t])),U(a=>[...a,n.overview.name]))}}}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.battle,children:[e.jsxs("div",{className:s.chosenPokemons,children:[e.jsx("h2",{className:s.name,children:D.username}),I.cards.length<3?e.jsx("p",{className:s.errorMessage,children:"Add more cards to start battle!"}):e.jsx("ul",{className:s.list,children:S==null?void 0:S.map(t=>{let a=s.item;return n!==null&&(a=ae.includes(t.name)?`${s.item} ${s.defeated}`:s.item),e.jsx("li",{className:`${a} ${n!==null&&n.overview.name===t.name?s.pickedPokemonBar:""}`,onClick:()=>ke(t.name),children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(se,{pokemon:t})})},d())})})]}),e.jsxs("div",{className:s.arena,style:{backgroundImage:"url(https://i.redd.it/dnlz6c3xni951.jpg)"},children:[c&&e.jsxs("p",{className:s.moveBox,children:["Move: ",F?e.jsx("span",{children:"User"}):e.jsx("span",{children:"Computer"})]}),v?null:e.jsx("div",{className:s.menuGear,onClick:()=>A(t=>!t),children:e.jsx(je,{size:"36px"})}),v?e.jsxs("div",{className:s.menuBackdrop,children:[e.jsxs("div",{className:s.menu,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>A(t=>!t),children:"X"}),e.jsx("h2",{className:s.menuTitle,children:"Menu"}),e.jsxs("ul",{className:s.menuList,children:[e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:`${s.btn} ${c===!1?"":s.disabledBtn}`,onClick:()=>fe(),disabled:!!c,children:"Start game"})},d()),e.jsx("li",{className:s.menuItem,children:e.jsxs("div",{className:s.difficultyBox,children:[e.jsx("h3",{className:s.menuText,children:"Difficulty:"}),e.jsx("button",{className:`${s.btn} ${c===!1?"":s.disabledBtn}`,type:"button",onClick:()=>K("easy"),children:"Easy"}),e.jsx("button",{className:`${s.btn} ${c===!1?"":s.disabledBtn}`,type:"button",onClick:()=>K("medium"),children:"Medium"})]})},d()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:s.btn,onClick:()=>ce(t=>!t),children:"Rules"})},d()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:`${s.btn} ${c?"":s.disabledBtn}`,onClick:()=>$(),disabled:!c,children:"End game"})},d())]})]}),e.jsxs("div",{className:`${s.menuRulesBox} ${me?s.menuRulesBoxOpen:""}`,children:[e.jsx("h2",{className:s.rulesTitle,children:"Rules"}),e.jsx("p",{className:s.rulesText,children:"During the game you will use three of your pokemons. Use the buttons to perform the appropriate action, such as attack or defense. Your special attack takes 3 rounds to recharge. When you lose on easy you lose one pokemon. If you lose on Medium, you lose two Pokemon. When you win on easy you get 1000 coins. After winning on medium level you get 2000 coins. Have fun pokemon trainer!"})]})]}):null,xe&&v===!1&&oe===!0&&le===!0?e.jsx("div",{className:s.gameFinished,children:e.jsxs("div",{className:s.gameFinishedModal,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>w(t=>!t),children:"X"}),e.jsx("h2",{className:s.gameFinishedTitle,children:N==="won"?e.jsx("span",{children:"Congrats You have won a duel!"}):e.jsx("span",{children:"You lost!"})}),N==="won"&&f==="easy"&&e.jsx("div",{children:e.jsx("p",{className:s.gameFinishedText,children:"You have won 1000 coins!"})}),N==="won"&&f==="medium"&&e.jsx("p",{className:s.gameFinishedText,children:"You have won 1500 coins!"}),N==="lost"&&f==="easy"&&e.jsxs("div",{children:[e.jsx("p",{className:s.gameFinishedText,children:"You have lost one of youre cards!. You didnt get coins for this!"}),e.jsx("ul",{children:L.map(t=>e.jsx("li",{className:s.lostPokemon,children:e.jsx(ee,{pokemon:t})},d()))})]}),N==="lost"&&f==="medium"&&e.jsxs("div",{children:[e.jsx("p",{className:s.gameFinishedText,children:"You have lost two of youre cards!. You didnt get coins for this!"}),e.jsx("ul",{className:s.lostPokemonList,children:L.map(t=>e.jsx("li",{className:s.lostPokemon,children:e.jsx(ee,{pokemon:t})},d()))})]})]})}):null,n===null||c===!1?null:e.jsxs("div",{className:s.pokemonArenaUser,children:[e.jsx("img",{className:`${s.pokeArenaImage} ${E?s.pokemonDefending:""} ${he?s.userAtacking:""}`,alt:"picked Pokemon",src:n.overview.sprites.back_default?n.overview.sprites.back_default:n.overview.sprites.front_default}),e.jsx("h2",{children:n.overview.name}),e.jsx("div",{className:s.healthBar,style:{width:`${n.overview.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",n.overview.stats[0].base_stat]})})})]}),o===null&&c===!1?null:e.jsxs("div",{className:s.pokemonArenaComputer,children:[e.jsx("img",{className:`${s.pokeArenaImage} ${ne?s.pokemonDefending:""} ${pe?s.computerAtacking:""}`,alt:"picked Pokemon",src:o.sprites.front_default}),e.jsx("h2",{children:o.name}),e.jsx("div",{className:s.healthBar,style:{width:`${o.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",o.stats[0].base_stat]})})})]}),n===null||c===!1||v===!0?null:e.jsxs("div",{className:s.userGui,children:[e.jsx("h2",{className:s.guiPokemonName,children:n.overview.name}),e.jsxs("div",{children:[e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>W(o.id,n.overview.stats[1].base_stat/10),children:["Hit ",n.overview.stats[1].base_stat]}),e.jsxs("button",{className:`${s.userBtn} ${p<3?s.disabledBtn:""}`,type:"button",onClick:()=>{W(o.id,n.overview.stats[3].base_stat/10),C(0)},disabled:p<3,children:["Special Attack"," ",n.overview.stats[3].base_stat]}),e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>_e(),children:["Defend ",n.overview.stats[2].base_stat]})]}),e.jsx("ul",{className:s.userGuiPokemonStats,children:n==null?void 0:n.overview.stats.map(t=>e.jsx("li",{children:e.jsxs("p",{className:s.statsText,children:[t.stat.name,":"," ",e.jsx("span",{className:s.statsTextOvrl,children:t.base_stat})]})},d()))})]}),o===null||c===!1||v===!0?null:e.jsxs("div",{className:s.computerGui,children:[e.jsx("h2",{className:s.guiPokemonName,children:o.name}),e.jsx("ul",{className:s.userGuiPokemonStats,children:o==null?void 0:o.stats.map(t=>e.jsx("li",{children:e.jsxs("p",{className:s.statsText,children:[t.stat.name,":"," ",e.jsx("span",{className:s.statsTextOvrl,children:t.base_stat})]})},d()))})]})]}),e.jsxs("div",{className:s.chosenPokemonsAI,children:[e.jsx("h2",{className:s.name,children:"AI"}),_.cards.length<3?e.jsx("ul",{className:s.list,children:e.jsx("li",{className:s.item,children:e.jsx("div",{className:s.pokeFrontBox})},d())}):e.jsx("ul",{className:s.list,children:G==null?void 0:G.map(t=>{let a=s.item;return o!==null&&(a=ue.includes(t.name)?`${s.itemAI} ${s.defeated}`:s.item),e.jsx("li",{className:`${a} ${o!==null&&o.name===t.name?s.pickedPokemonBar:""}`,children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(se,{pokemon:t})})},d())})})]})]})})};export{Us as default};
