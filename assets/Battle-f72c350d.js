import{J as V,r as u,u as Y,a as d,x as Z,K as z,w as X,L as J,M as K,O as Q,l as W,Q as D,R as M,j as e,n as h,T as q,U as ee,V as se,W as te,X as ae,Y as ne}from"./index-d37092ea.js";import{P as T}from"./pokeFront-6923bacb.js";import{N as _}from"./PokeDex-f456a598.js";const oe="_battle_1lvr6_1",re="_chosenPokemons_1lvr6_7",le="_chosenPokemonsAI_1lvr6_10",ce="_arena_1lvr6_13",ie="_errorMessage_1lvr6_27",me="_moveBox_1lvr6_37",ue="_list_1lvr6_42",de="_item_1lvr6_48",he="_itemAI_1lvr6_53",_e="_pokeFrontBox_1lvr6_60",ve="_name_1lvr6_63",fe="_menuGear_1lvr6_71",xe="_menu_1lvr6_71",pe="_menuBackdrop_1lvr6_98",Ce="_menuTitle_1lvr6_104",ke="_menuList_1lvr6_112",je="_menuItem_1lvr6_118",Ne="_difficultyBox_1lvr6_121",be="_menuText_1lvr6_125",Le="_btn_1lvr6_136",ge="_menuCloseBtn_1lvr6_159",Be="_pokemonArenaUser_1lvr6_181",Ae="_defeated_1lvr6_191",we="_pokemonArenaComputer_1lvr6_195",ye="_pokeArenaImage_1lvr6_204",Ie="_moveUpDown_1lvr6_1",Ue="_healthBar_1lvr6_219",Pe="_health_1lvr6_219",De="_healthText_1lvr6_231",Me="_userGui_1lvr6_241",Te="_userBtn_1lvr6_246",s={battle:oe,chosenPokemons:re,chosenPokemonsAI:le,arena:ce,errorMessage:ie,moveBox:me,list:ue,item:de,itemAI:he,pokeFrontBox:_e,name:ve,menuGear:fe,menu:xe,menuBackdrop:pe,menuTitle:Ce,menuList:ke,menuItem:je,difficultyBox:Ne,menuText:be,btn:Le,menuCloseBtn:ge,pokemonArenaUser:Be,defeated:Ae,pokemonArenaComputer:we,pokeArenaImage:ye,moveUpDown:Ie,healthBar:Ue,health:Pe,healthText:De,userGui:Me,userBtn:Te};function Ge(x){return V({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z",fill:"currentColor"}}]})(x)}const He=()=>{const[x,p]=u.useState(0),[G,A]=u.useState([""]),[C,k]=u.useState(!0),[O,w]=u.useState(!1),[S,F]=u.useState(!1),l=Y(),j=d(Z),v=j.cards,c=d(z),N=d(X),b=d(J),y=d(K),i=d(Q);let n=j.pokemonOnArena,o=c.pokemonOnArena;const I=d(W),L=I.filter(t=>{const a=t.name;return v.some(r=>r.overview.name===a)}),g=I.filter(t=>{const a=t.name;return c.cards.some(r=>r.name===a)});u.useEffect(()=>{i===!1&&(o=null)},[i]);const U=t=>{l(q(t))},H=t=>{const a=v.filter(r=>r.overview.name===t);l(M(a[0]))},P=t=>{if(b===!1)return _.Notify.failure("wait for youre turn User!");const a=n.overview.stats[1].base_stat/10;let r=o.stats[0].base_stat;const f=o.stats[2].base_stat;if(S){let m=a-f;m<0&&(m=0),r-=m,F(!1)}else r-=a;l(ee({health:r,id:t}))},$=()=>{if(y===!1)return _.Notify.failure("wait for youre turn Computer!");const t=n.overview.id,a=n.overview.stats[2].base_stat/10,r=o.stats[1].base_stat/10;let f=n.overview.stats[0].base_stat;if(O){let m=r-a;m<0&&(m=0),f-=m,w(!1)}else f-=r;l(se({health:f,id:t}))},E=()=>{w(!0),l(te())},R=()=>{if((v.length<3||c.cards.length<3)&&_.Notify.warning("Pick difficulty level or add pokemons for battle"),n)k(!1),l(ae()),l(D(c.cards[x])),p(t=>t+=1);else{_.Notify.warning("U must pick pokemon to start");return}},B=()=>{l(ne()),p(0),A([""])};return u.useEffect(()=>{if(i!==!1){if(console.log("game logic"),o.stats[0].base_stat<=0){const t=c.cards.findIndex(a=>a.stats[0].base_stat>0);if(t<0)return B(),_.Notify.success(`Congrats ${N.username}, You have won a battle!`);o.stats[0].base_stat<=0&&(l(D(c.cards[t])),p(a=>a+=1))}if(b===!1&&y===!0&&setTimeout(()=>{console.log("pc atakuje"),$()},2e3),n.overview.stats[0].base_stat<=0){const t=v.findIndex(a=>a.overview.stats[0].base_stat>0);if(t<0)return B(),_.Notify.success(`You lost! Dont worry ${N.username}, You can try again!`);t>=0&&(l(M(v[t])),A(a=>[...a,n.overview.name]))}}}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.battle,children:[e.jsxs("div",{className:s.chosenPokemons,children:[e.jsx("h2",{className:s.name,children:N.username}),j.cards.length<3?e.jsx("p",{className:s.errorMessage,children:"Add more cards to start battle!"}):e.jsx("ul",{className:s.list,children:L==null?void 0:L.map(t=>{let a=s.item;return n!==null&&(a=G.includes(t.name)?`${s.item} ${s.defeated}`:s.item),e.jsx("li",{className:a,onClick:()=>H(t.name),children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(T,{pokemon:t})})},h())})})]}),e.jsxs("div",{className:s.arena,style:{backgroundImage:"url(https://i.redd.it/dnlz6c3xni951.jpg)"},children:[i&&e.jsxs("p",{className:s.moveBox,children:["Move: ",b?e.jsx("span",{children:"User"}):e.jsx("span",{children:"Computer"})]}),C?null:e.jsx("div",{className:s.menuGear,onClick:()=>k(t=>!t),children:e.jsx(Ge,{size:"36px"})}),C?e.jsx("div",{className:s.menuBackdrop,children:e.jsxs("div",{className:s.menu,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>k(t=>!t),children:"X"}),e.jsx("h2",{className:s.menuTitle,children:"Menu"}),e.jsxs("ul",{className:s.menuList,children:[e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:s.btn,onClick:()=>R(),children:"Start game"})},h()),e.jsx("li",{className:s.menuItem,children:e.jsxs("div",{className:s.difficultyBox,children:[e.jsx("h3",{className:s.menuText,children:"Difficulty:"}),e.jsx("button",{className:s.btn,type:"button",onClick:()=>U("easy"),children:"Easy"}),e.jsx("button",{className:s.btn,type:"button",onClick:()=>U("medium"),children:"Medium"})]})},h()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:s.btn,onClick:()=>B(),children:"End game"})},h())]})]})}):null,n===null||i===!1?null:e.jsxs("div",{className:s.pokemonArenaUser,children:[e.jsx("img",{className:s.pokeArenaImage,alt:"picked Pokemon",src:n.overview.sprites.back_default}),e.jsx("h2",{children:n.overview.name}),e.jsx("div",{className:s.healthBar,style:{width:`${n.overview.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",n.overview.stats[0].base_stat]})})})]}),o===null&&i===!1?null:e.jsxs("div",{className:s.pokemonArenaComputer,children:[e.jsx("img",{className:s.pokeArenaImage,alt:"picked Pokemon",src:o.sprites.front_default}),e.jsx("h2",{children:o.name}),e.jsx("div",{className:s.healthBar,style:{width:`${o.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",o.stats[0].base_stat]})})})]}),n===null||i===!1||C===!0?null:e.jsxs("div",{className:s.userGui,children:[e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>P(o.id),children:["Hit ",n.overview.stats[1].base_stat]}),e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>P(o.id),children:["Special Attack ",n.overview.stats[3].base_stat]}),e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>E(),children:["Defend ",n.overview.stats[2].base_stat]})]})]}),e.jsxs("div",{className:s.chosenPokemonsAI,children:[e.jsx("h2",{className:s.name,children:"AI"}),c.cards.length<3?e.jsx("ul",{className:s.list,children:e.jsx("li",{className:s.item,children:e.jsx("div",{className:s.pokeFrontBox})},h())}):e.jsx("ul",{className:s.list,children:g==null?void 0:g.map(t=>{let a=s.itemAI;return o!==null&&o.stats[0].base_stat<=0&&t.name===o.name&&(a+=` ${s.defeated}`),e.jsx("li",{className:a,children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(T,{pokemon:t})})},h())})})]})]})})};export{He as default};
