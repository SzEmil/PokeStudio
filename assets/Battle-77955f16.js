import{r as u,u as G,a as c,x as M,J as S,w as $,K as E,L as H,M as Y,l as R,O as P,Q as B,R as I,j as e,n as w,T as z,U as J,V as K,W as L}from"./index-fc55abac.js";import{P as U}from"./pokeFront-e7bb840d.js";import{N as d}from"./PokeDex-48a60128.js";const Q="_battle_1ap9w_1",V="_chosenPokemons_1ap9w_7",W="_chosenPokemonsAI_1ap9w_10",q="_arena_1ap9w_13",X="_list_1ap9w_28",Z="_item_1ap9w_34",ee="_itemAI_1ap9w_39",se="_pokeFrontBox_1ap9w_46",te="_name_1ap9w_49",ae="_menu_1ap9w_58",ne="_difficultyBox_1ap9w_65",oe="_difficultyText_1ap9w_68",re="_btn_1ap9w_79",le="_pokemonArenaUser_1ap9w_103",ce="_defeated_1ap9w_112",ie="_pokemonArenaComputer_1ap9w_116",me="_pokeArenaImage_1ap9w_125",de="_moveUpDown_1ap9w_1",he="_healthBar_1ap9w_140",ue="_health_1ap9w_140",pe="_healthText_1ap9w_152",s={battle:Q,chosenPokemons:V,chosenPokemonsAI:W,arena:q,list:X,item:Z,itemAI:ee,pokeFrontBox:se,name:te,menu:ae,difficultyBox:ne,difficultyText:oe,btn:re,pokemonArenaUser:le,defeated:ce,pokemonArenaComputer:ie,pokeArenaImage:me,moveUpDown:de,healthBar:he,health:ue,healthText:pe},ke=()=>{const[p,f]=u.useState(0),[T,j]=u.useState([""]),r=G(),_=c(M),h=_.cards,i=c(S),x=c($),N=c(E),b=c(H),m=c(Y);let o=_.pokemonOnArena,n=i.pokemonOnArena;const A=c(R),k=A.filter(t=>{const a=t.name;return h.some(l=>l.overview.name===a)}),v=A.filter(t=>{const a=t.name;return i.cards.some(l=>l.name===a)});u.useEffect(()=>{m===!1&&(n=null)},[m]);const y=t=>{r(z(t))},O=t=>{const a=h.filter(l=>l.overview.name===t);r(I(a[0]))},D=(t,a)=>{if(N===!1)return d.Notify.failure("wait for youre turn User!");let l=n.stats[0].base_stat;l-=t,r(J({health:l,id:a}))},C=()=>{if(b===!1)return d.Notify.failure("wait for youre turn Computer!");const t=o.overview.id;let a=o.overview.stats[0].base_stat;a-=n.stats[1].base_stat/10,r(K({health:a,id:t}))},F=()=>{if((h.length<3||i.cards.length<3)&&d.Notify.warning("Pick difficulty level or add pokemons for battle"),o)r(L()),r(B(i.cards[p])),f(t=>t+=1);else{d.Notify.warning("U must pick pokemon to start");return}},g=()=>{r(P()),f(0),j([""])};return u.useEffect(()=>{if(m!==!1){if(console.log("wykonano damage na bocie"),n.stats[0].base_stat<=0&&p>2)return r(P()),d.Notify.success(`Congrats ${x.username}, You have won a battle!`);if(n.stats[0].base_stat<=0&&(r(B(i.cards[p])),f(t=>t+=1)),N===!1&&b===!0&&C(),o.overview.stats[0].base_stat<=0){const t=h.findIndex(a=>a.overview.stats[0].base_stat>0);if(console.log(t),t<0)return g(),d.Notify.success(`You lost! Dont worry ${x.username}, You can try again!`);t>=0&&(r(I(h[t])),j(a=>[...a,o.overview.name]))}}}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.menu,children:[e.jsx("h3",{className:s.difficultyText,children:"Difficulty:"}),e.jsxs("div",{className:s.difficultyBox,children:[e.jsx("button",{className:s.btn,type:"button",onClick:()=>y("easy"),children:"Easy"}),e.jsx("button",{className:s.btn,type:"button",onClick:()=>y("medium"),children:"Medium"})]}),e.jsxs("p",{children:["Game started?: ",m===!0&&e.jsx("span",{children:"Game ON"})]})]}),e.jsxs("div",{className:s.battle,children:[e.jsxs("div",{className:s.chosenPokemons,children:[e.jsx("h2",{className:s.name,children:x.username}),_.cards.length<3?e.jsx("p",{children:"Add more cards to start battle"}):e.jsx("ul",{className:s.list,children:k==null?void 0:k.map(t=>{let a=s.item;return o!==null&&(a=T.includes(t.name)?`${s.item} ${s.defeated}`:s.item),e.jsx("li",{className:a,onClick:()=>O(t.name),children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(U,{pokemon:t})})},w())})})]}),e.jsxs("div",{className:s.arena,style:m?{backgroundImage:"url(https://i.redd.it/dnlz6c3xni951.jpg)"}:{},children:[e.jsx("button",{onClick:()=>C(),children:"Make damage for user"}),e.jsx("button",{onClick:()=>F(),children:"Start game"}),e.jsx("button",{onClick:()=>g(),children:"Stop Game"}),o===null?null:e.jsxs("div",{className:s.pokemonArenaUser,children:[e.jsx("img",{className:s.pokeArenaImage,alt:"picked Pokemon",src:o.overview.sprites.back_default}),e.jsx("h2",{children:o.overview.name}),e.jsx("div",{className:s.healthBar,style:{width:`${o.overview.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",o.overview.stats[0].base_stat]})})}),e.jsxs("button",{type:"button",onClick:()=>D(o.overview.stats[1].base_stat/10,n.id),children:["Hit ",o.overview.stats[1].base_stat]})]}),n===null&&m===!1?null:e.jsxs("div",{className:s.pokemonArenaComputer,children:[e.jsx("img",{className:s.pokeArenaImage,alt:"picked Pokemon",src:n.sprites.front_default}),e.jsx("h2",{children:n.name}),e.jsx("div",{className:s.healthBar,style:{width:`${n.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",n.stats[0].base_stat]})})})]})]}),e.jsxs("div",{className:s.chosenPokemonsAI,children:[e.jsx("h2",{className:s.name,children:"AI"}),i.cards.length<3?e.jsx("ul",{className:s.list,children:e.jsx("li",{className:s.item,children:e.jsx("div",{className:s.pokeFrontBox})},w())}):e.jsx("ul",{className:s.list,children:v==null?void 0:v.map(t=>{let a=s.itemAI;return n!==null&&n.stats[0].base_stat<=0&&t.name===n.name&&(a+=` ${s.defeated}`),e.jsx("li",{className:a,children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(U,{pokemon:t})})},w())})})]})]})]})};export{ke as default};
