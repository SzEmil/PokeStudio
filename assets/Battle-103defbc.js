import{r as i,u as ge,a as f,l as we,p as g,D as V,E as Z,j as e,n as d,R as ve,e as ee,F as je,G as Ne,H as be,I as Be,J as Ce,K as Te,L as Pe,M as Ae,O as ye}from"./index-e4c772fa.js";import{b as Ie,P as se}from"./pokemonsSelectors-3e24c945.js";import{s as De,a as Fe,b as Se,c as Ge,d as $e,e as Me}from"./PokeDex-cc2b4a78.js";const Ue="_battle_14w52_1",Ee="_chosenPokemons_14w52_10",Oe="_chosenPokemonsAI_14w52_13",Re="_arena_14w52_16",Le="_errorMessage_14w52_32",Ye="_moveBox_14w52_42",He="_list_14w52_47",ze="_item_14w52_53",Je="_itemAI_14w52_59",Ke="_pokeFrontBox_14w52_66",We="_name_14w52_69",Xe="_menuGear_14w52_77",qe="_menu_14w52_77",Qe="_menuBackdrop_14w52_105",Ve="_menuTitle_14w52_114",Ze="_menuList_14w52_122",es="_menuItem_14w52_128",ss="_difficultyBox_14w52_131",ts="_menuText_14w52_135",as="_menuRulesBox_14w52_145",ns="_menuRulesBoxOpen_14w52_161",os="_rulesTitle_14w52_164",ls="_rulesText_14w52_173",is="_btn_14w52_184",cs="_menuCloseBtn_14w52_207",rs="_pokemonArenaUser_14w52_229",ms="_defeated_14w52_239",us="_pokemonArenaComputer_14w52_243",ds="_pokeArenaImage_14w52_252",hs="_moveUpDown_14w52_1",_s="_userAtacking_14w52_257",fs="_attackAI_14w52_1",ps="_computerAtacking_14w52_271",xs="_attackUser_14w52_1",ks="_healthBar_14w52_296",gs="_health_14w52_296",ws="_healthText_14w52_308",vs="_userGui_14w52_318",js="_guiPokemonName_14w52_326",Ns="_userBtn_14w52_334",bs="_userGuiPokemonStats_14w52_358",Bs="_statsText_14w52_365",Cs="_computerGui_14w52_372",Ts="_gameFinished_14w52_380",Ps="_gameFinishedModal_14w52_389",As="_gameFinishedTitle_14w52_409",ys="_gameFinishedText_14w52_418",Is="_disabledBtn_14w52_427",Ds="_pokemonDefending_14w52_432",Fs="_pickedPokemonBar_14w52_437",Ss="_lostPokemon_14w52_455",Gs="_lostPokemonList_14w52_458",s={battle:Ue,chosenPokemons:Ee,chosenPokemonsAI:Oe,arena:Re,errorMessage:Le,moveBox:Ye,list:He,item:ze,itemAI:Je,pokeFrontBox:Ke,name:We,menuGear:Xe,menu:qe,menuBackdrop:Qe,menuTitle:Ve,menuList:Ze,menuItem:es,difficultyBox:ss,menuText:ts,menuRulesBox:as,menuRulesBoxOpen:ns,rulesTitle:os,rulesText:ls,btn:is,menuCloseBtn:cs,pokemonArenaUser:rs,defeated:ms,pokemonArenaComputer:us,pokeArenaImage:ds,moveUpDown:hs,userAtacking:_s,attackAI:fs,computerAtacking:ps,attackUser:xs,healthBar:ks,health:gs,healthText:ws,userGui:vs,guiPokemonName:js,userBtn:Ns,userGuiPokemonStats:bs,statsText:Bs,computerGui:Cs,gameFinished:Ts,gameFinishedModal:Ps,gameFinishedTitle:As,gameFinishedText:ys,disabledBtn:Is,pokemonDefending:Ds,pickedPokemonBar:Fs,lostPokemon:Ss,lostPokemonList:Gs},Es=()=>{const[te,M]=i.useState(0),[ae,U]=i.useState([""]),[w,T]=i.useState(!0),[E,P]=i.useState(!1),[h,b]=i.useState(!1),[ne,v]=i.useState(!1),[j,O]=i.useState(""),[oe,R]=i.useState(!1),[le,A]=i.useState(!1),[k,ie]=i.useState(),[_,B]=i.useState(0),[C,y]=i.useState(0),[ce,re]=i.useState(!1),[L,me]=i.useState([]),[ue,de]=i.useState([""]),[he,Y]=i.useState(!1),[_e,H]=i.useState(!1),m=ge(),I=f(De),p=I.cards,x=f(Fe),D=f(we),F=f(Se),z=f(Ge),r=f($e),fe=f(Me);let n=I.pokemonOnArena,o=x.pokemonOnArena;const J=f(Ie),S=J.filter(t=>{const a=t.name;return p.some(l=>l.overview.name===a)}),G=J.filter(t=>{const a=t.name;return x.cards.some(l=>l.name===a)});i.useEffect(()=>{r===!1&&(o=null)},[r]);const K=t=>{m(je(t)),ie(t)},pe=t=>{const a=p.filter(l=>l.overview.name===t);m(Z(a[0]))},W=(t,a)=>{if(F===!1)return g.Notify.failure("wait for youre turn User!");console.log("user atakuje");let l=o.stats[0].base_stat;const u=o.stats[2].base_stat/10;if(console.log(h,"poza warunkiem"),h){console.log(h);let c=a-u;c<0&&(c=0),l-=c,b(!1),setTimeout(()=>{v(!1)},2e3)}else l-=a;const N=l.toFixed(2);m(Ne({healtForDispatch:N,id:t})),_!==3&&(B(c=>c+=1),console.log(_)),Y(!0),setTimeout(()=>{Y(!1)},1500)},X=t=>{if(z===!1)return g.Notify.failure("wait for youre turn Computer!");console.log(h,"poza warunkiem"),b(!1),v(!1);const a=n.overview.id,l=n.overview.stats[2].base_stat/10;let u=n.overview.stats[0].base_stat;if(E){let c=t-l;c<0&&(c=0),u-=c,setTimeout(()=>{P(!1)},2e3)}else u-=t;C!==3&&(y(c=>c+=1),console.log(_)),H(!0);const N=u.toFixed(2);m(be({healtForDispatch:N,id:a})),setTimeout(()=>{H(!1)},1500)},xe=()=>{P(!0),_!==3&&B(t=>t+=1),m(Be()),b(!1),setTimeout(()=>{v(!1)},2e3)},q=()=>{v(!0),b(!0),setTimeout(()=>{P(!1)},2e3),C!==3&&(y(t=>t+=1),console.log(_)),m(Ce()),setTimeout(()=>{v(!1)},2e3)},ke=()=>{if((p.length<3||x.cards.length<3)&&g.Notify.warning("Pick difficulty level or add pokemons for battle"),n)T(!1),m(Te()),m(V(x.cards[te])),M(t=>t+=1);else{g.Notify.warning("U must pick pokemon to start");return}},$=()=>{m(Pe()),M(0),U([""]),B(0)},Q=(t,a)=>{if(t==="won"){let l=0;a==="easy"&&(l=1e3),a==="medium"&&(l=1500),m(Ae(l))}if(t==="lost"){const l=p.map(c=>c.overview.id);let u=[];if(a==="easy"&&u.push(l[Math.floor(Math.random()*l.length)]),a==="medium")for(;u.length<2;){const c=Math.floor(Math.random()*l.length);u.includes(l[c])||u.push(l[c])}const N=p.filter(c=>u.includes(c.overview.id));me(N),m(ye(u))}};return i.useEffect(()=>{if(r!==!1){if(console.log("game logic"),o.stats[0].base_stat<=0){const t=x.cards.findIndex(a=>a.stats[0].base_stat>0);if(t<0)return O("won"),R(!0),A(!0),$(),Q("won",k),g.Notify.success(`Congrats ${D.username}, You have won a battle!`);o.stats[0].base_stat<=0&&(setTimeout(()=>{m(V(x.cards[t]))},1500),setTimeout(()=>{de(a=>[...a,o.name])},100))}if(F===!1&&z===!0){const t=o.stats[1].base_stat/10,a=o.stats[3].base_stat/10;console.log(C),C===3&&Math.random()>.1?(X(a),console.log("pc SUPERatakuje"),console.log(h),y(0)):Math.random()<.3||_===3&&Math.random()<.5?(q(),console.log("pc DEFENDUJE SIE"),console.log(h)):(X(t),console.log("pc ATAKUJE"),console.log(h))}if(n.overview.stats[0].base_stat<=0){const t=p.findIndex(a=>a.overview.stats[0].base_stat>0);if(t<0)return O("lost"),R(!0),A(!0),$(),Q("lost",k),g.Notify.success(`You lost! Dont worry ${D.username}, You can try again!`);t>=0&&(m(Z(p[t])),U(a=>[...a,n.overview.name]))}}}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.battle,children:[e.jsxs("div",{className:s.chosenPokemons,children:[e.jsx("h2",{className:s.name,children:D.username}),I.cards.length<3?e.jsx("p",{className:s.errorMessage,children:"Add more cards to start battle!"}):e.jsx("ul",{className:s.list,children:S==null?void 0:S.map(t=>{let a=s.item;return n!==null&&(a=ae.includes(t.name)?`${s.item} ${s.defeated}`:s.item),e.jsx("li",{className:`${a} ${n!==null&&n.overview.name===t.name?s.pickedPokemonBar:""}`,onClick:()=>pe(t.name),children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(se,{pokemon:t})})},d())})})]}),e.jsxs("div",{className:s.arena,style:{backgroundImage:"url(https://i.redd.it/dnlz6c3xni951.jpg)"},children:[r&&e.jsxs("p",{className:s.moveBox,children:["Move: ",F?e.jsx("span",{children:"User"}):e.jsx("span",{children:"Computer"})]}),w?null:e.jsx("div",{className:s.menuGear,onClick:()=>T(t=>!t),children:e.jsx(ve,{size:"36px"})}),w?e.jsxs("div",{className:s.menuBackdrop,children:[e.jsxs("div",{className:s.menu,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>T(t=>!t),children:"X"}),e.jsx("h2",{className:s.menuTitle,children:"Menu"}),e.jsxs("ul",{className:s.menuList,children:[e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:`${s.btn} ${r===!1?"":s.disabledBtn}`,onClick:()=>ke(),disabled:!!r,children:"Start game"})},d()),e.jsx("li",{className:s.menuItem,children:e.jsxs("div",{className:s.difficultyBox,children:[e.jsx("h3",{className:s.menuText,children:"Difficulty:"}),e.jsx("button",{className:`${s.btn} ${r===!1?"":s.disabledBtn}`,type:"button",onClick:()=>K("easy"),children:"Easy"}),e.jsx("button",{className:`${s.btn} ${r===!1?"":s.disabledBtn}`,type:"button",onClick:()=>K("medium"),children:"Medium"})]})},d()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:s.btn,onClick:()=>re(t=>!t),children:"Rules"})},d()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:`${s.btn} ${r?"":s.disabledBtn}`,onClick:()=>$(),disabled:!r,children:"End game"})},d())]})]}),e.jsxs("div",{className:`${s.menuRulesBox} ${ce?s.menuRulesBoxOpen:""}`,children:[e.jsx("h2",{className:s.rulesTitle,children:"Rules"}),e.jsx("p",{className:s.rulesText,children:"During the game you will use three of your pokemons. Use the buttons to perform the appropriate action, such as attack or defense. Your special attack takes 3 rounds to recharge. Attack and defence stats of pokemons stats are divided by 10. When you lose on easy you lose one pokemon. If you lose on Medium, you lose two Pokemon. When you win on easy you get 1000 coins. After winning on medium level you get 2000 coins. Have fun pokemon trainer!"})]})]}):null,fe&&w===!1&&oe===!0&&le===!0?e.jsx("div",{className:s.gameFinished,children:e.jsxs("div",{className:s.gameFinishedModal,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>A(t=>!t),children:"X"}),e.jsx("h2",{className:s.gameFinishedTitle,children:j==="won"?e.jsx("span",{children:"Congrats You have won a duel!"}):e.jsx("span",{children:"You lost!"})}),j==="won"&&k==="easy"&&e.jsx("div",{children:e.jsx("p",{className:s.gameFinishedText,children:"You have won 1000 coins!"})}),j==="won"&&k==="medium"&&e.jsx("p",{className:s.gameFinishedText,children:"You have won 1500 coins!"}),j==="lost"&&k==="easy"&&e.jsxs("div",{children:[e.jsx("p",{className:s.gameFinishedText,children:"You have lost one of youre cards!. You didnt get coins for this!"}),e.jsx("ul",{children:L.map(t=>e.jsx("li",{className:s.lostPokemon,children:e.jsx(ee,{pokemon:t})},d()))})]}),j==="lost"&&k==="medium"&&e.jsxs("div",{children:[e.jsx("p",{className:s.gameFinishedText,children:"You have lost two of youre cards!. You didnt get coins for this!"}),e.jsx("ul",{className:s.lostPokemonList,children:L.map(t=>e.jsx("li",{className:s.lostPokemon,children:e.jsx(ee,{pokemon:t})},d()))})]})]})}):null,n===null||r===!1?null:e.jsxs("div",{className:s.pokemonArenaUser,children:[e.jsx("img",{className:`${s.pokeArenaImage} ${E?s.pokemonDefending:""} ${he?s.userAtacking:""}`,alt:"picked Pokemon",src:n.overview.sprites.back_default?n.overview.sprites.back_default:n.overview.sprites.front_default}),e.jsx("h2",{children:n.overview.name}),e.jsx("div",{className:s.healthBar,style:{width:`${n.overview.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",n.overview.stats[0].base_stat]})})})]}),o===null&&r===!1?null:e.jsxs("div",{className:s.pokemonArenaComputer,children:[e.jsx("img",{className:`${s.pokeArenaImage} ${ne?s.pokemonDefending:""} ${_e?s.computerAtacking:""}`,alt:"picked Pokemon",src:o.sprites.front_default}),e.jsx("h2",{children:o.name}),e.jsx("div",{className:s.healthBar,style:{width:`${o.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",o.stats[0].base_stat]})})})]}),n===null||r===!1||w===!0?null:e.jsxs("div",{className:s.userGui,children:[e.jsx("h2",{className:s.guiPokemonName,children:n.overview.name}),e.jsxs("div",{children:[e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>W(o.id,n.overview.stats[1].base_stat/10),children:["Hit ",n.overview.stats[1].base_stat]}),e.jsxs("button",{className:`${s.userBtn} ${_<3?s.disabledBtn:""}`,type:"button",onClick:()=>{W(o.id,n.overview.stats[3].base_stat/10),B(0)},disabled:_<3,children:["Special Attack"," ",n.overview.stats[3].base_stat]}),e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>xe(),children:["Defend ",n.overview.stats[2].base_stat]})]}),e.jsx("ul",{className:s.userGuiPokemonStats,children:n==null?void 0:n.overview.stats.map(t=>e.jsx("li",{children:e.jsxs("p",{className:s.statsText,children:[t.stat.name,":"," ",e.jsx("span",{className:s.statsTextOvrl,children:t.base_stat})]})},d()))})]}),o===null||r===!1||w===!0?null:e.jsxs("div",{className:s.computerGui,children:[e.jsx("h2",{className:s.guiPokemonName,children:o.name}),e.jsx("ul",{className:s.userGuiPokemonStats,children:o==null?void 0:o.stats.map(t=>e.jsx("li",{children:e.jsxs("p",{className:s.statsText,children:[t.stat.name,":"," ",e.jsx("span",{className:s.statsTextOvrl,children:t.base_stat})]})},d()))})]})]}),e.jsxs("div",{className:s.chosenPokemonsAI,children:[e.jsx("h2",{className:s.name,children:"AI"}),x.cards.length<3?e.jsx("ul",{className:s.list,children:e.jsx("li",{className:s.item,children:e.jsx("div",{className:s.pokeFrontBox})},d())}):e.jsx("ul",{className:s.list,children:G==null?void 0:G.map(t=>{let a=s.item;return o!==null&&(a=ue.includes(t.name)?`${s.itemAI} ${s.defeated}`:s.item),e.jsx("li",{className:`${a} ${o!==null&&o.name===t.name?s.pickedPokemonBar:""}`,children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(se,{pokemon:t})})},d())})})]})]})})};export{Es as default};
