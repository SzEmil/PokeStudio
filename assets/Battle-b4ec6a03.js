import{r as i,u as ge,a as f,l as ye,p as g,J as q,K as Z,j as e,n as d,R as ve,e as ee,L as je,M as Ne,O as be,Q as Be,T as Ce,U as Te,V as Pe,W as Ae,X as we}from"./index-37eeab48.js";import{b as Ie,P as se}from"./pokemonsSelectors-20425806.js";import{s as De,a as Fe,b as Se,c as $e,d as Ge,e as Ue}from"./PokeDex-dfb5203f.js";const Me="_battle_ey0m0_1",Oe="_chosenPokemons_ey0m0_10",Ee="_chosenPokemonsAI_ey0m0_13",Re="_arena_ey0m0_16",Le="_errorMessage_ey0m0_32",Ye="_moveBox_ey0m0_42",He="_list_ey0m0_47",ze="_item_ey0m0_53",Je="_itemAI_ey0m0_59",We="_pokeFrontBox_ey0m0_66",Xe="_name_ey0m0_69",Ke="_menuGear_ey0m0_77",Qe="_menu_ey0m0_77",Ve="_menuBackdrop_ey0m0_105",qe="_menuTitle_ey0m0_114",Ze="_menuList_ey0m0_122",es="_menuItem_ey0m0_128",ss="_difficultyBox_ey0m0_131",ts="_menuText_ey0m0_135",as="_menuRulesBox_ey0m0_145",ns="_menuRulesBoxOpen_ey0m0_161",os="_rulesTitle_ey0m0_164",ls="_rulesText_ey0m0_173",is="_btn_ey0m0_184",cs="_menuCloseBtn_ey0m0_207",ms="_pokemonArenaUser_ey0m0_229",rs="_defeated_ey0m0_239",us="_pokemonArenaComputer_ey0m0_243",ds="_pokeArenaImage_ey0m0_252",hs="_moveUpDown_ey0m0_1",_s="_userAtacking_ey0m0_257",fs="_attackAI_ey0m0_1",ps="_computerAtacking_ey0m0_271",xs="_attackUser_ey0m0_1",ks="_healthBar_ey0m0_296",gs="_health_ey0m0_296",ys="_healthText_ey0m0_308",vs="_userGui_ey0m0_318",js="_guiPokemonName_ey0m0_326",Ns="_userBtn_ey0m0_334",bs="_userGuiPokemonStats_ey0m0_358",Bs="_statsText_ey0m0_365",Cs="_computerGui_ey0m0_372",Ts="_gameFinished_ey0m0_380",Ps="_gameFinishedModal_ey0m0_389",As="_gameFinishedTitle_ey0m0_409",ws="_gameFinishedText_ey0m0_418",Is="_disabledBtn_ey0m0_427",Ds="_pokemonDefending_ey0m0_432",Fs="_pickedPokemonBar_ey0m0_437",Ss="_lostPokemon_ey0m0_455",$s="_lostPokemonList_ey0m0_458",s={battle:Me,chosenPokemons:Oe,chosenPokemonsAI:Ee,arena:Re,errorMessage:Le,moveBox:Ye,list:He,item:ze,itemAI:Je,pokeFrontBox:We,name:Xe,menuGear:Ke,menu:Qe,menuBackdrop:Ve,menuTitle:qe,menuList:Ze,menuItem:es,difficultyBox:ss,menuText:ts,menuRulesBox:as,menuRulesBoxOpen:ns,rulesTitle:os,rulesText:ls,btn:is,menuCloseBtn:cs,pokemonArenaUser:ms,defeated:rs,pokemonArenaComputer:us,pokeArenaImage:ds,moveUpDown:hs,userAtacking:_s,attackAI:fs,computerAtacking:ps,attackUser:xs,healthBar:ks,health:gs,healthText:ys,userGui:vs,guiPokemonName:js,userBtn:Ns,userGuiPokemonStats:bs,statsText:Bs,computerGui:Cs,gameFinished:Ts,gameFinishedModal:Ps,gameFinishedTitle:As,gameFinishedText:ws,disabledBtn:Is,pokemonDefending:Ds,pickedPokemonBar:Fs,lostPokemon:Ss,lostPokemonList:$s},Os=()=>{const[te,U]=i.useState(0),[ae,M]=i.useState([""]),[y,T]=i.useState(!0),[O,P]=i.useState(!1),[h,b]=i.useState(!1),[ne,v]=i.useState(!1),[j,E]=i.useState(""),[oe,R]=i.useState(!1),[le,A]=i.useState(!1),[k,ie]=i.useState(),[_,B]=i.useState(0),[C,w]=i.useState(0),[ce,me]=i.useState(!1),[L,re]=i.useState([]),[ue,de]=i.useState([""]),[he,Y]=i.useState(!1),[_e,H]=i.useState(!1),r=ge(),I=f(De),p=I.cards,x=f(Fe),D=f(ye),F=f(Se),z=f($e),m=f(Ge),fe=f(Ue);let n=I.pokemonOnArena,o=x.pokemonOnArena;const J=f(Ie),S=J.filter(t=>{const a=t.name;return p.some(l=>l.overview.name===a)}),$=J.filter(t=>{const a=t.name;return x.cards.some(l=>l.name===a)});i.useEffect(()=>{m===!1&&(o=null)},[m]);const W=t=>{r(je(t)),ie(t)},pe=t=>{const a=p.filter(l=>l.overview.name===t);r(Z(a[0]))},X=(t,a)=>{if(F===!1)return g.Notify.failure("wait for youre turn User!");console.log("user atakuje");let l=o.stats[0].base_stat;const u=o.stats[2].base_stat/10;if(console.log(h,"poza warunkiem"),h){console.log(h);let c=a-u;c<0&&(c=0),l-=c,b(!1),setTimeout(()=>{v(!1)},2e3)}else l-=a;const N=l.toFixed(2);r(Ne({healtForDispatch:N,id:t})),_!==3&&(B(c=>c+=1),console.log(_)),Y(!0),setTimeout(()=>{Y(!1)},1500)},K=t=>{if(z===!1)return g.Notify.failure("wait for youre turn Computer!");console.log(h,"poza warunkiem"),b(!1),v(!1);const a=n.overview.id,l=n.overview.stats[2].base_stat/10;let u=n.overview.stats[0].base_stat;if(O){let c=t-l;c<0&&(c=0),u-=c,setTimeout(()=>{P(!1)},2e3)}else u-=t;C!==3&&(w(c=>c+=1),console.log(_)),H(!0);const N=u.toFixed(2);r(be({healtForDispatch:N,id:a})),setTimeout(()=>{H(!1)},1500)},xe=()=>{P(!0),_!==3&&B(t=>t+=1),r(Be()),b(!1),setTimeout(()=>{v(!1)},2e3)},Q=()=>{v(!0),b(!0),setTimeout(()=>{P(!1)},2e3),C!==3&&(w(t=>t+=1),console.log(_)),r(Ce()),setTimeout(()=>{v(!1)},2e3)},ke=()=>{if((p.length<3||x.cards.length<3)&&g.Notify.warning("Pick difficulty level or add pokemons for battle"),n)T(!1),r(Te()),r(q(x.cards[te])),U(t=>t+=1);else{g.Notify.warning("U must pick pokemon to start");return}},G=()=>{r(Pe()),U(0),M([""]),B(0)},V=(t,a)=>{if(t==="won"){let l=0;a==="easy"&&(l=1e3),a==="medium"&&(l=1500),r(Ae(l))}if(t==="lost"){const l=p.map(c=>c.overview.id);let u=[];if(a==="easy"&&u.push(l[Math.floor(Math.random()*l.length)]),a==="medium")for(;u.length<2;){const c=Math.floor(Math.random()*l.length);u.includes(l[c])||u.push(l[c])}const N=p.filter(c=>u.includes(c.overview.id));re(N),r(we(u))}};return i.useEffect(()=>{if(m!==!1){if(console.log("game logic"),o.stats[0].base_stat<=0){const t=x.cards.findIndex(a=>a.stats[0].base_stat>0);if(t<0)return E("won"),R(!0),A(!0),G(),V("won",k),g.Notify.success(`Congrats ${D.username}, You have won a battle!`);o.stats[0].base_stat<=0&&(setTimeout(()=>{r(q(x.cards[t]))},1500),setTimeout(()=>{de(a=>[...a,o.name])},100))}if(F===!1&&z===!0){const t=o.stats[1].base_stat/10,a=o.stats[3].base_stat/10;console.log(C),C===3&&Math.random()>.1?(K(a),console.log("pc SUPERatakuje"),console.log(h),w(0)):Math.random()<.3||_===3&&Math.random()<.5?(Q(),console.log("pc DEFENDUJE SIE"),console.log(h)):(K(t),console.log("pc ATAKUJE"),console.log(h))}if(n.overview.stats[0].base_stat<=0){const t=p.findIndex(a=>a.overview.stats[0].base_stat>0);if(t<0)return E("lost"),R(!0),A(!0),G(),V("lost",k),g.Notify.success(`You lost! Dont worry ${D.username}, You can try again!`);t>=0&&(r(Z(p[t])),M(a=>[...a,n.overview.name]))}}}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.battle,children:[e.jsxs("div",{className:s.chosenPokemons,children:[e.jsx("h2",{className:s.name,children:D.username}),I.cards.length<3?e.jsx("p",{className:s.errorMessage,children:"Add more cards to start battle!"}):e.jsx("ul",{className:s.list,children:S==null?void 0:S.map(t=>{let a=s.item;return n!==null&&(a=ae.includes(t.name)?`${s.item} ${s.defeated}`:s.item),e.jsx("li",{className:`${a} ${n!==null&&n.overview.name===t.name?s.pickedPokemonBar:""}`,onClick:()=>pe(t.name),children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(se,{pokemon:t})})},d())})})]}),e.jsxs("div",{className:s.arena,style:{backgroundImage:"url(https://i.redd.it/dnlz6c3xni951.jpg)"},children:[m&&e.jsxs("p",{className:s.moveBox,children:["Move: ",F?e.jsx("span",{children:"User"}):e.jsx("span",{children:"Computer"})]}),y?null:e.jsx("div",{className:s.menuGear,onClick:()=>T(t=>!t),children:e.jsx(ve,{size:"36px"})}),y?e.jsxs("div",{className:s.menuBackdrop,children:[e.jsxs("div",{className:s.menu,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>T(t=>!t),children:"X"}),e.jsx("h2",{className:s.menuTitle,children:"Menu"}),e.jsxs("ul",{className:s.menuList,children:[e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:`${s.btn} ${m===!1?"":s.disabledBtn}`,onClick:()=>ke(),disabled:!!m,children:"Start game"})},d()),e.jsx("li",{className:s.menuItem,children:e.jsxs("div",{className:s.difficultyBox,children:[e.jsx("h3",{className:s.menuText,children:"Difficulty:"}),e.jsx("button",{className:`${s.btn} ${m===!1?"":s.disabledBtn}`,type:"button",onClick:()=>W("easy"),children:"Easy"}),e.jsx("button",{className:`${s.btn} ${m===!1?"":s.disabledBtn}`,type:"button",onClick:()=>W("medium"),children:"Medium"})]})},d()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:s.btn,onClick:()=>me(t=>!t),children:"Rules"})},d()),e.jsx("li",{className:s.menuItem,children:e.jsx("button",{className:`${s.btn} ${m?"":s.disabledBtn}`,onClick:()=>G(),disabled:!m,children:"End game"})},d())]})]}),e.jsxs("div",{className:`${s.menuRulesBox} ${ce?s.menuRulesBoxOpen:""}`,children:[e.jsx("h2",{className:s.rulesTitle,children:"Rules"}),e.jsx("p",{className:s.rulesText,children:"During the game you will use three of your pokemons. Use the buttons to perform the appropriate action, such as attack or defense. Your special attack takes 3 rounds to recharge. Attack and defence stats of pokemons stats are divided by 10. When you lose on easy you lose one pokemon. If you lose on Medium, you lose two Pokemon. When you win on easy you get 1000 coins. After winning on medium level you get 2000 coins. Have fun pokemon trainer!"})]})]}):null,fe&&y===!1&&oe===!0&&le===!0?e.jsx("div",{className:s.gameFinished,children:e.jsxs("div",{className:s.gameFinishedModal,children:[e.jsx("button",{type:"button",className:s.menuCloseBtn,onClick:()=>A(t=>!t),children:"X"}),e.jsx("h2",{className:s.gameFinishedTitle,children:j==="won"?e.jsx("span",{children:"Congrats You have won a duel!"}):e.jsx("span",{children:"You lost!"})}),j==="won"&&k==="easy"&&e.jsx("div",{children:e.jsx("p",{className:s.gameFinishedText,children:"You have won 1000 coins!"})}),j==="won"&&k==="medium"&&e.jsx("p",{className:s.gameFinishedText,children:"You have won 1500 coins!"}),j==="lost"&&k==="easy"&&e.jsxs("div",{children:[e.jsx("p",{className:s.gameFinishedText,children:"You have lost one of youre cards!. You didnt get coins for this!"}),e.jsx("ul",{children:L.map(t=>e.jsx("li",{className:s.lostPokemon,children:e.jsx(ee,{pokemon:t})},d()))})]}),j==="lost"&&k==="medium"&&e.jsxs("div",{children:[e.jsx("p",{className:s.gameFinishedText,children:"You have lost two of youre cards!. You didnt get coins for this!"}),e.jsx("ul",{className:s.lostPokemonList,children:L.map(t=>e.jsx("li",{className:s.lostPokemon,children:e.jsx(ee,{pokemon:t})},d()))})]})]})}):null,n===null||m===!1?null:e.jsxs("div",{className:s.pokemonArenaUser,children:[e.jsx("img",{className:`${s.pokeArenaImage} ${O?s.pokemonDefending:""} ${he?s.userAtacking:""}`,alt:"picked Pokemon",src:n.overview.sprites.back_default?n.overview.sprites.back_default:n.overview.sprites.front_default}),e.jsx("h2",{children:n.overview.name}),e.jsx("div",{className:s.healthBar,style:{width:`${n.overview.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",n.overview.stats[0].base_stat]})})})]}),o===null&&m===!1?null:e.jsxs("div",{className:s.pokemonArenaComputer,children:[e.jsx("img",{className:`${s.pokeArenaImage} ${ne?s.pokemonDefending:""} ${_e?s.computerAtacking:""}`,alt:"picked Pokemon",src:o.sprites.front_default}),e.jsx("h2",{children:o.name}),e.jsx("div",{className:s.healthBar,style:{width:`${o.stats[0].base_stat}px`},children:e.jsx("div",{className:s.health,children:e.jsxs("div",{className:s.healthText,children:["HP:",o.stats[0].base_stat]})})})]}),n===null||m===!1||y===!0?null:e.jsxs("div",{className:s.userGui,children:[e.jsx("h2",{className:s.guiPokemonName,children:n.overview.name}),e.jsxs("div",{children:[e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>X(o.id,n.overview.stats[1].base_stat/10),children:["Hit ",n.overview.stats[1].base_stat]}),e.jsxs("button",{className:`${s.userBtn} ${_<3?s.disabledBtn:""}`,type:"button",onClick:()=>{X(o.id,n.overview.stats[3].base_stat/10),B(0)},disabled:_<3,children:["Special Attack"," ",n.overview.stats[3].base_stat]}),e.jsxs("button",{className:s.userBtn,type:"button",onClick:()=>xe(),children:["Defend ",n.overview.stats[2].base_stat]})]}),e.jsx("ul",{className:s.userGuiPokemonStats,children:n==null?void 0:n.overview.stats.map(t=>e.jsx("li",{children:e.jsxs("p",{className:s.statsText,children:[t.stat.name,":"," ",e.jsx("span",{className:s.statsTextOvrl,children:t.base_stat})]})},d()))})]}),o===null||m===!1||y===!0?null:e.jsxs("div",{className:s.computerGui,children:[e.jsx("h2",{className:s.guiPokemonName,children:o.name}),e.jsx("ul",{className:s.userGuiPokemonStats,children:o==null?void 0:o.stats.map(t=>e.jsx("li",{children:e.jsxs("p",{className:s.statsText,children:[t.stat.name,":"," ",e.jsx("span",{className:s.statsTextOvrl,children:t.base_stat})]})},d()))})]})]}),e.jsxs("div",{className:s.chosenPokemonsAI,children:[e.jsx("h2",{className:s.name,children:"AI"}),x.cards.length<3?e.jsx("ul",{className:s.list,children:e.jsx("li",{className:s.item,children:e.jsx("div",{className:s.pokeFrontBox})},d())}):e.jsx("ul",{className:s.list,children:$==null?void 0:$.map(t=>{let a=s.item;return o!==null&&(a=ue.includes(t.name)?`${s.itemAI} ${s.defeated}`:s.item),e.jsx("li",{className:`${a} ${o!==null&&o.name===t.name?s.pickedPokemonBar:""}`,children:e.jsx("div",{className:s.pokeFrontBox,children:e.jsx(se,{pokemon:t})})},d())})})]})]})})};export{Os as default};
